<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Alternation and Grouping - JavaScript RegExp</title>
        
        


        <!-- Custom HTML head -->
        


        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="Example based guide to mastering JavaScript regexp">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        
        <link rel="stylesheet" href="fonts/fonts.css">
        

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        
        <link rel="stylesheet" href="custom.css">
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="cover.html">Cover</a></li><li class="chapter-item expanded affix "><a href="buy.html">Buy PDF/EPUB versions</a></li><li class="chapter-item expanded "><a href="preface.html"><strong aria-hidden="true">1.</strong> Preface</a></li><li class="chapter-item expanded "><a href="whats-so-special-about-regular-expressions.html"><strong aria-hidden="true">2.</strong> What's so special about Regular Expressions?</a></li><li class="chapter-item expanded "><a href="regexp-introduction.html"><strong aria-hidden="true">3.</strong> RegExp introduction</a></li><li class="chapter-item expanded "><a href="anchors.html"><strong aria-hidden="true">4.</strong> Anchors</a></li><li class="chapter-item expanded "><a href="alternation-and-grouping.html" class="active"><strong aria-hidden="true">5.</strong> Alternation and Grouping</a></li><li class="chapter-item expanded "><a href="escaping-metacharacters.html"><strong aria-hidden="true">6.</strong> Escaping metacharacters</a></li><li class="chapter-item expanded "><a href="dot-metacharacter-and-quantifiers.html"><strong aria-hidden="true">7.</strong> Dot metacharacter and Quantifiers</a></li><li class="chapter-item expanded "><a href="interlude-tools-for-debugging-and-visualization.html"><strong aria-hidden="true">8.</strong> Interlude: Tools for debugging and visualization</a></li><li class="chapter-item expanded "><a href="working-with-matched-portions.html"><strong aria-hidden="true">9.</strong> Working with matched portions</a></li><li class="chapter-item expanded "><a href="character-class.html"><strong aria-hidden="true">10.</strong> Character class</a></li><li class="chapter-item expanded "><a href="groupings-and-backreferences.html"><strong aria-hidden="true">11.</strong> Groupings and backreferences</a></li><li class="chapter-item expanded "><a href="interlude-common-tasks.html"><strong aria-hidden="true">12.</strong> Interlude: Common tasks</a></li><li class="chapter-item expanded "><a href="lookarounds.html"><strong aria-hidden="true">13.</strong> Lookarounds</a></li><li class="chapter-item expanded "><a href="unicode.html"><strong aria-hidden="true">14.</strong> Unicode</a></li><li class="chapter-item expanded "><a href="further-reading.html"><strong aria-hidden="true">15.</strong> Further Reading</a></li><li class="chapter-item expanded "><a href="Exercise_solutions.html"><strong aria-hidden="true">16.</strong> Exercise Solutions</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">JavaScript RegExp</h1>

                    <div class="right-buttons">
                        
                        <a href="https://github.com/learnbyexample/learn_js_regexp" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1><a class="header" href="#alternation-and-grouping" id="alternation-and-grouping">Alternation and Grouping</a></h1>
<p>Many a times, you want to check if the input string matches multiple patterns. For example, whether a car color is <em>green</em> or <em>blue</em> or <em>red</em>. In programming terms, you need to perform OR conditional. This chapter will show how to use alternation for such cases. These patterns can also have some common elements between them, in which case grouping helps to form terser regexps. This chapter will also discuss the precedence rules used to determine which alternation wins.</p>
<h2><a class="header" href="#or-conditional" id="or-conditional">OR conditional</a></h2>
<p>In a conditional expression, you can use the logical operators to combine multiple conditions. With regular expressions, the <code>|</code> metacharacter is similar to logical OR. The regexp will match if any of the expression separated by <code>|</code> is satisfied. Each of these alternations is a full regexp. For example, anchors are specific to that particular alternation.</p>
<pre><code class="language-js">// match either 'cat' or 'dog'
&gt; const pets = /cat|dog/
&gt; pets.test('I like cats')
&lt; true
&gt; pets.test('I like dogs')
&lt; true
&gt; pets.test('I like parrots')
&lt; false

// replace either 'cat' at start of string or 'cat' at end of word
&gt; 'catapults concatenate cat scat'.replace(/^cat|cat\b/g, 'X')
&lt; &quot;Xapults concatenate X sX&quot;

// replace either 'cat' or 'dog' or 'fox' with 'mammal'
&gt; 'cat dog bee parrot fox'.replace(/cat|dog|fox/g, 'mammal')
&lt; &quot;mammal mammal bee parrot mammal&quot;
</code></pre>
<blockquote>
<p><img src="images/info.svg" alt="info" /> You might infer from the above examples that there can be situations where many alternations are required. See <a href="./escaping-metacharacters.html#dynamically-building-alternation">Dynamically building alternation</a> section for examples and details.</p>
</blockquote>
<h2><a class="header" href="#grouping" id="grouping">Grouping</a></h2>
<p>Often, there are some common things among the regexp alternatives. It could be common characters or regexp qualifiers like the anchors. In such cases, you can group them using a pair of parentheses metacharacters. Similar to <code>a(b+c)d = abd+acd</code> in maths, you get <code>a(b|c)d = abd|acd</code> in regular expressions.</p>
<pre><code class="language-js">// without grouping
&gt; 'red reform read arrest'.replace(/reform|rest/g, 'X')
&lt; &quot;red X read arX&quot;
// with grouping
&gt; 'red reform read arrest'.replace(/re(form|st)/g, 'X')
&lt; &quot;red X read arX&quot;

// without grouping
&gt; 'par spare part party'.replace(/\bpar\b|\bpart\b/g, 'X')
&lt; &quot;X spare X party&quot;
// taking out common anchors
&gt; 'par spare part party'.replace(/\b(par|part)\b/g, 'X')
&lt; &quot;X spare X party&quot;
// taking out common characters as well
// you'll later learn a better technique instead of using empty alternate
&gt; 'par spare part party'.replace(/\bpar(|t)\b/g, 'X')
&lt; &quot;X spare X party&quot;
</code></pre>
<blockquote>
<p><img src="images/info.svg" alt="info" /> There's plenty more features to grouping than just forming terser regexp. It will be discussed as they become relevant in coming chapters.</p>
</blockquote>
<h2><a class="header" href="#precedence-rules" id="precedence-rules">Precedence rules</a></h2>
<p>There's some tricky situations when using alternation. If it is used for testing a match to get <code>true/false</code> against a string input, there is no ambiguity. However, for other things like string replacement, it depends on a few factors. Say, you want to replace either <code>are</code> or <code>spared</code> — which one should get precedence? The bigger word <code>spared</code> or the substring <code>are</code> inside it or based on something else?</p>
<p>The regexp alternative which matches earliest in the input string gets precedence.</p>
<pre><code class="language-js">&gt; let words = 'lion elephant are rope not'

// starting index of 'on' &lt; index of 'ant' for given string input
// so 'on' will be replaced irrespective of order of alternations
&gt; words.replace(/on|ant/, 'X')
&lt; &quot;liX elephant are rope not&quot;
&gt; words.replace(/ant|on/, 'X')
&lt; &quot;liX elephant are rope not&quot;
</code></pre>
<p>So, what happens if two or more alternatives match on same index? The precedence is then left to right in the order of declaration.</p>
<pre><code class="language-js">&gt; let mood = 'best years'

// starting index for 'year' and 'years' will always be same
// so, which one gets replaced depends on the order of alternations
&gt; mood.replace(/year|years/, 'X')
&lt; &quot;best Xs&quot;
&gt; mood.replace(/years|year/, 'X')
&lt; &quot;best X&quot;
</code></pre>
<p>Another example with <code>replace</code> to drive home the issue.</p>
<pre><code class="language-js">&gt; let sample = 'ear xerox at mare part learn eye'

// this is going to be same as: replace(/ar/g, 'X')
&gt; sample.replace(/ar|are|art/g, 'X')
&lt; &quot;eX xerox at mXe pXt leXn eye&quot;
// this is going to be same as: replace(/are|ar/g, 'X')
&gt; sample.replace(/are|ar|art/g, 'X')
&lt; &quot;eX xerox at mX pXt leXn eye&quot;
// phew, finally this one works as expected
&gt; sample.replace(/are|art|ar/g, 'X')
&lt; &quot;eX xerox at mX pX leXn eye&quot;
</code></pre>
<h2><a class="header" href="#cheatsheet-and-summary" id="cheatsheet-and-summary">Cheatsheet and Summary</a></h2>
<table><thead><tr><th>Note</th><th>Description</th></tr></thead><tbody>
<tr><td><code>pat1\|pat2\|pat3</code></td><td>multiple regexp combined as OR conditional</td></tr>
<tr><td></td><td>each alternative can have independent anchors</td></tr>
<tr><td><code>()</code></td><td>group pattern(s)</td></tr>
<tr><td><code>a(b\|c)d</code></td><td>same as <code>abd\|acd</code></td></tr>
<tr><td>Alternation precedence</td><td>pattern which matches earliest in the input gets precedence</td></tr>
<tr><td></td><td>tie-breaker is left to right if matches have same starting location</td></tr>
</tbody></table>
<p>So, this chapter was about specifying one or more alternate matches within the same regexp using <code>|</code> metacharacter. Which can further be simplified using <code>()</code> grouping if there are common aspects. Among the alternations, earliest matching pattern gets precedence. Left to right ordering is used as a tie-breaker if multiple alternations match starting from the same location. In the next chapter, you'll learn how to construct alternation from an array of strings taking care of precedence rules. Grouping has various other uses too, which will be discussed in coming chapters.</p>
<h2><a class="header" href="#exercises" id="exercises">Exercises</a></h2>
<p><strong>a)</strong> For the given input array, filter all elements that start with <code>den</code> or end with <code>ly</code></p>
<pre><code class="language-js">&gt; let items = ['lovely', '1\ndentist', '2 lonely', 'eden', 'fly\n', 'dent']

&gt; items.filter()        // add your solution here
&lt; [&quot;lovely&quot;, &quot;2 lonely&quot;, &quot;dent&quot;]
</code></pre>
<p><strong>b)</strong> For the given array, filter all elements having a line starting with <code>den</code> or ending with <code>ly</code></p>
<pre><code class="language-js">&gt; let items = ['lovely', '1\ndentist', '2 lonely', 'eden', 'fly\nfar', 'dent']

&gt; items.filter()        // add your solution here
&lt; [&quot;lovely&quot;, &quot;1\ndentist&quot;, &quot;2 lonely&quot;, &quot;fly\nfar&quot;, &quot;dent&quot;]
</code></pre>
<p><strong>c)</strong> For the given input strings, replace all occurrences of <code>removed</code> or <code>reed</code> or <code>received</code> or <code>refused</code> with <code>X</code>.</p>
<pre><code class="language-js">&gt; let s1 = 'creed refuse removed read'
&gt; let s2 = 'refused reed redo received'

&gt; const pat1 =      // add your solution here

&gt; s1.replace(pat1, 'X')
&lt; &quot;cX refuse X read&quot;
&gt; s2.replace(pat1, 'X')
&lt; &quot;X X redo X&quot;
</code></pre>
<p><strong>d)</strong> For the given input strings, replace <code>late</code> or <code>later</code> or <code>slated</code> with <code>A</code>.</p>
<pre><code class="language-js">&gt; let str1 = 'plate full of slate'
&gt; let str2 = &quot;slated for later, don't be late&quot;

&gt; const pat2 =      // add your solution here

&gt; str1.replace(pat2, 'A')
&lt; &quot;pA full of sA&quot;
&gt; str2.replace(pat2, 'A')
&lt; &quot;A for A, don't be A&quot;
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="anchors.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="escaping-metacharacters.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a rel="prev" href="anchors.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a rel="next" href="escaping-metacharacters.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        

        

        

        
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        

        

        
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        

    </body>
</html>
